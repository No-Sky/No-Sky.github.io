<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://no-sky.github.io/images/favicon.ico><meta name=robots content="noodp"><meta name=author content="nosky"><meta name=description content="nosky 的个人学习笔记"><meta name=keywords content="[note 笔记 nosky]"><link rel=prev href=https://no-sky.github.io/2017/oracle%E7%AC%94%E8%AE%B0-%E5%8D%81%E5%9B%9B/><link rel=next href=https://no-sky.github.io/2018/mybatis%E5%88%9D%E8%AF%86/><link rel=canonical href=https://no-sky.github.io/2018/%E7%94%A8java%E7%94%9F%E6%88%90%E4%BA%8C%E7%BB%B4%E7%A0%81/><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><title>用Java生成二维码 | Note</title><meta name=title content="用Java生成二维码 | Note"><link rel=stylesheet href=/font/iconfont.css><link rel=stylesheet href=/css/main.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/no-sky.github.io"},"articleSection":"posts","name":"用Java生成二维码","headline":"用Java生成二维码","description":"java开发二维码的流程\n1、导入核心jar包，在这里使用Google的zxing.jar，还有一个是日本开发qrcode就不用了。\n\tcore-3.1.0.jar 2、编写二维码核心类\npublic static void zxingImg(String content,HttpServletResponse response) throws IOException{ int width2 = 200; \/\/图片高度和宽度 \tint height2 = 200; \/\/二维码的图片格式 \tString format = \x26#34;gif\x26#34;; Hashtable hints = new Hashtable(); \/\/内容所使用编码 \thints.put(EncodeHintType.CHARACTER_SET, \x26#34;UTF-8\x26#34;); try { BitMatrix bitMatrix = new MultiFormatWriter().encode(content,BarcodeFormat.QR_CODE, width2, height2, hints); int width = bitMatrix.getWidth(); int height = bitMatrix.getHeight(); BufferedImage image = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB); for (int x = 0; x \x26lt; width; x\x2b\x2b) { for (int y = 0; y \x26lt; height; y\x2b\x2b) { image.","inLanguage":"en-us","author":"nosky","creator":"nosky","publisher":"nosky","accountablePerson":"nosky","copyrightHolder":"nosky","copyrightYear":"2018","datePublished":"2018-01-20 20:50:43 \x2b0000 UTC","dateModified":"2018-01-20 20:50:43 \x2b0000 UTC","url":"https:\/\/no-sky.github.io\/2018\/%E7%94%A8java%E7%94%9F%E6%88%90%E4%BA%8C%E7%BB%B4%E7%A0%81\/","wordCount":"138","keywords":["QR Code","Note"]}</script><script type=text/javascript async src="https://cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML">MathJax.Hub.Config({tex2jax:{inlineMath:[['$','$'],['\\(','\\)']],displayMath:[['$$','$$'],['\[','\]']],processEscapes:true,processEnvironments:true,skipTags:['script','noscript','style','textarea','pre'],TeX:{equationNumbers:{autoNumber:"AMS"},extensions:["AMSmath.js","AMSsymbols.js"]}},"HTML-CSS":{linebreaks:{automatic:true}},SVG:{linebreaks:{automatic:true}}});MathJax.Hub.Queue(function(){var all=MathJax.Hub.getAllJax(),i;for(i=0;i<all.length;i+=1){all[i].SourceElement().parentNode.className+=' has-jax';}});</script><style>code.has-jax{font:inherit;font-size:100%;background:inherit;border:inherit;color:#515151}</style></head><body><div class=wrapper><nav class=navbar><div class=container><div class="navbar-header header-logo"><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href=https://no-sky.github.io>Note</a></div><div class="menu navbar-right"><a class=menu-item href=/posts/>Blog</a>
<a class=menu-item href=/tags/>Tags</a></div></div></nav><nav class=navbar-mobile id=nav-mobile style=display:none><div class=container><div class=navbar-header><div><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href=https://no-sky.github.io>Note</a></div><div class=menu-toggle><span></span><span></span><span></span></div></div><div class=menu id=mobile-menu><a class=menu-item href=/posts/>Blog</a>
<a class=menu-item href=/tags/>Tags</a></div></div></nav><main class=main><div class=container><article class=post-warp itemscope itemtype=http://schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline">用Java生成二维码</h1><div class=post-meta>Written by <a itemprop=name href=https://no-sky.github.io rel=author>nosky</a> with ♥
<span class=post-time>on <time datetime=2018-01-20 itemprop=datePublished>January 20, 2018</time></span>
in</div></header><div class=post-content><p>java开发二维码的流程</p><p>1、导入核心jar包，在这里使用Google的zxing.jar，还有一个是日本开发qrcode就不用了。</p><pre><code>	core-3.1.0.jar
</code></pre><p>2、编写二维码核心类</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>	<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>zxingImg</span><span style=color:#f92672>(</span>String content<span style=color:#f92672>,</span>HttpServletResponse response<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> IOException<span style=color:#f92672>{</span>

	    <span style=color:#66d9ef>int</span> width2 <span style=color:#f92672>=</span> 200<span style=color:#f92672>;</span>   <span style=color:#75715e>//图片高度和宽度
</span><span style=color:#75715e></span>	    <span style=color:#66d9ef>int</span> height2 <span style=color:#f92672>=</span> 200<span style=color:#f92672>;</span> 

	    <span style=color:#75715e>//二维码的图片格式 
</span><span style=color:#75715e></span>	    String format <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;gif&#34;</span><span style=color:#f92672>;</span> 

	    Hashtable hints <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Hashtable<span style=color:#f92672>(</span><span style=color:#f92672>)</span><span style=color:#f92672>;</span> 

	    <span style=color:#75715e>//内容所使用编码 
</span><span style=color:#75715e></span>	    hints<span style=color:#f92672>.</span><span style=color:#a6e22e>put</span><span style=color:#f92672>(</span>EncodeHintType<span style=color:#f92672>.</span><span style=color:#a6e22e>CHARACTER_SET</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;UTF-8&#34;</span><span style=color:#f92672>)</span><span style=color:#f92672>;</span> 

	    <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
		    BitMatrix bitMatrix <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> MultiFormatWriter<span style=color:#f92672>(</span><span style=color:#f92672>)</span><span style=color:#f92672>.</span><span style=color:#a6e22e>encode</span><span style=color:#f92672>(</span>content<span style=color:#f92672>,</span>BarcodeFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>QR_CODE</span><span style=color:#f92672>,</span> width2<span style=color:#f92672>,</span> height2<span style=color:#f92672>,</span> hints<span style=color:#f92672>)</span><span style=color:#f92672>;</span>

		    <span style=color:#66d9ef>int</span> width <span style=color:#f92672>=</span> bitMatrix<span style=color:#f92672>.</span><span style=color:#a6e22e>getWidth</span><span style=color:#f92672>(</span><span style=color:#f92672>)</span><span style=color:#f92672>;</span> 
		    <span style=color:#66d9ef>int</span> height <span style=color:#f92672>=</span> bitMatrix<span style=color:#f92672>.</span><span style=color:#a6e22e>getHeight</span><span style=color:#f92672>(</span><span style=color:#f92672>)</span><span style=color:#f92672>;</span> 

		    BufferedImage image <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> BufferedImage<span style=color:#f92672>(</span>width<span style=color:#f92672>,</span> height<span style=color:#f92672>,</span> BufferedImage<span style=color:#f92672>.</span><span style=color:#a6e22e>TYPE_INT_RGB</span><span style=color:#f92672>)</span><span style=color:#f92672>;</span> 

			    <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> x <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span> x <span style=color:#f92672>&lt;</span> width<span style=color:#f92672>;</span> x<span style=color:#f92672>+</span><span style=color:#f92672>+</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span> 
			        <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> y <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span> y <span style=color:#f92672>&lt;</span> height<span style=color:#f92672>;</span> y<span style=color:#f92672>+</span><span style=color:#f92672>+</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span> 
			            image<span style=color:#f92672>.</span><span style=color:#a6e22e>setRGB</span><span style=color:#f92672>(</span>x<span style=color:#f92672>,</span> y<span style=color:#f92672>,</span> bitMatrix<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>x<span style=color:#f92672>,</span> y<span style=color:#f92672>)</span> <span style=color:#f92672>?</span> 0xFF000000 <span style=color:#f92672>:</span> 0xFFFFFFFF<span style=color:#f92672>)</span><span style=color:#f92672>;</span> <span style=color:#75715e>//二维码图片为黑白两色
</span><span style=color:#75715e></span>			    	<span style=color:#f92672>}</span> 
				<span style=color:#f92672>}</span>
		    <span style=color:#75715e>//输出二维码图片流
</span><span style=color:#75715e></span>		    ImageIO<span style=color:#f92672>.</span><span style=color:#a6e22e>write</span><span style=color:#f92672>(</span>image<span style=color:#f92672>,</span><span style=color:#e6db74>&#34;gif&#34;</span><span style=color:#f92672>,</span>response<span style=color:#f92672>.</span><span style=color:#a6e22e>getOutputStream</span><span style=color:#f92672>(</span><span style=color:#f92672>)</span><span style=color:#f92672>)</span><span style=color:#f92672>;</span>

		    <span style=color:#75715e>//在本地生成二维码图片 
</span><span style=color:#75715e></span>		    <span style=color:#75715e>//File outputFile = new File(&#34;d:&#34;+File.separator+&#34;new.gif&#34;); 
</span><span style=color:#75715e></span>		    <span style=color:#75715e>//MatrixToImageWriter.writeToFile(bitMatrix, format, outputFile);
</span><span style=color:#75715e></span>
			<span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>WriterException e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
			    e<span style=color:#f92672>.</span><span style=color:#a6e22e>printStackTrace</span><span style=color:#f92672>(</span><span style=color:#f92672>)</span><span style=color:#f92672>;</span>
			<span style=color:#f92672>}</span> 
		<span style=color:#f92672>}</span>
</code></pre></div><p>3、使用二维码核心类</p><p>1）可以在Servlet中使用</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>doPost</span><span style=color:#f92672>(</span>HttpServletRequest request<span style=color:#f92672>,</span> HttpServletResponse response<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> ServletException<span style=color:#f92672>,</span> IOException <span style=color:#f92672>{</span>

	    <span style=color:#75715e>//设置编码
</span><span style=color:#75715e></span>	    request<span style=color:#f92672>.</span><span style=color:#a6e22e>setCharacterEncoding</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;UTF-8&#34;</span><span style=color:#f92672>)</span><span style=color:#f92672>;</span>
	    response<span style=color:#f92672>.</span><span style=color:#a6e22e>setContentType</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;text/html;charset=UTF-8&#34;</span><span style=color:#f92672>)</span><span style=color:#f92672>;</span>

	    String content <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> String<span style=color:#f92672>(</span>request<span style=color:#f92672>.</span><span style=color:#a6e22e>getParameter</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;content&#34;</span><span style=color:#f92672>)</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getBytes</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;ISO-8859-1&#34;</span><span style=color:#f92672>)</span><span style=color:#f92672>,</span><span style=color:#e6db74>&#34;UTF-8&#34;</span><span style=color:#f92672>)</span><span style=color:#f92672>;</span>
	    QrcodeUtil<span style=color:#f92672>.</span><span style=color:#a6e22e>QrcodeImg</span><span style=color:#f92672>(</span>content<span style=color:#f92672>,</span> response<span style=color:#f92672>)</span><span style=color:#f92672>;</span>
	<span style=color:#f92672>}</span>
</code></pre></div><p>2）使用SpringMVC(后续添加)</p><p>4、在网页中显示</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>	&lt;<span style=color:#f92672>img</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;QrcodeServlet?content=&lt;%=content %&gt;&#34;</span> /&gt;
</code></pre></div></div><div class=post-copyright><p class=copyright-item><span>Author:</span>
<span>nosky</span></p><p class=copyright-item><span>Link:</span>
<a href=https://no-sky.github.io/2018/%E7%94%A8java%E7%94%9F%E6%88%90%E4%BA%8C%E7%BB%B4%E7%A0%81/>https://no-sky.github.io/2018/%E7%94%A8java%E7%94%9F%E6%88%90%E4%BA%8C%E7%BB%B4%E7%A0%81/</span></p><p class="copyright-item lincese">本文采用<a rel=license href=http://creativecommons.org/licenses/by-nc/4.0/ target=_blank>知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可</p></div><div class=post-tags><section><i class="iconfont icon-tag"></i>Tag(s):
<span class=tag><a href=https://no-sky.github.io/tags/qr-code/>#QR Code</a></span></section><section><a href=javascript:window.history.back();>back</a></span> ·
<span><a href=https://no-sky.github.io>home</a></span></section></div><div class=post-nav><a href=https://no-sky.github.io/2017/oracle%E7%AC%94%E8%AE%B0-%E5%8D%81%E5%9B%9B/ class=prev rel=prev title="Oracle笔记 （十四）"><i class="iconfont icon-left"></i>&nbsp;Oracle笔记 （十四）</a>
<a href=https://no-sky.github.io/2018/mybatis%E5%88%9D%E8%AF%86/ class=next rel=next title=Mybatis初识>Mybatis初识&nbsp;<i class="iconfont icon-right"></i></a></div><div class=post-comment></div></article></div></main><footer class=footer><div class=copyright>&copy;
<span itemprop=copyrightYear>2016 - 2020</span>
<span class=with-love><i class="iconfont icon-love"></i></span><span class=author itemprop=copyrightHolder><a href=https://no-sky.github.io>nosky</a> |</span>
<a href=http://beian.miit.gov.cn/ target=_blank rel="external nofollow">湘ICP备19027112号</a> |
<a target=_blank href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=43042102000116" rel="external nofollow"><img src=/images/beian.png>湘公网安备 43042102000116号</a> |
<span>Powered by <a href=https://gohugo.io/ target=_blank rel="external nofollow">Hugo</a> & <a href=https://github.com/liuzc/leaveit target=_blank rel="external nofollow">LeaveIt</a></span></br><span><a href=https://www.upyun.com/><img style=width:80px;height:30px;background-color:#70847d src=/images/upyun.png alt></a></span></div></footer><script src=/js/vendor_no_gallery.min.js async></script></div></body></html>