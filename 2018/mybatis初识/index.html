<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://no-sky.github.io/images/favicon.ico><meta name=robots content="noodp"><meta name=author content="nosky"><meta name=description content="nosky 的个人学习笔记"><meta name=keywords content="[note 笔记 nosky]"><link rel=prev href=https://no-sky.github.io/2018/%E7%94%A8java%E7%94%9F%E6%88%90%E4%BA%8C%E7%BB%B4%E7%A0%81/><link rel=next href=https://no-sky.github.io/2018/mybatis%E4%B9%8Bcrud%E6%93%8D%E4%BD%9C/><link rel=canonical href=https://no-sky.github.io/2018/mybatis%E5%88%9D%E8%AF%86/><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><title>Mybatis初识 | Note</title><meta name=title content="Mybatis初识 | Note"><link rel=stylesheet href=/font/iconfont.css><link rel=stylesheet href=/css/main.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/no-sky.github.io"},"articleSection":"posts","name":"Mybatis初识","headline":"Mybatis初识","description":"Mybatis初识 * ​\tMyBatis是支持普通SQL查询，存储过程和高级映射的优秀持久层框架。MyBatis消除 ​\t了几乎所有的JDBC代码和参数的手工设置以及对结果集的检索。MyBatis可以使用简单的 ​\tXML或注解用于配置和原始映射，将接口和Java的POJO（Plain Old Java Objects，普通的 ​\tJava对象）映射成数据库中的记录。 * Mybatis简单使用\n1、引入jar包 * ​\tmybatis-3.1.1.jar ​\tlog4j-1.2.16.jar ​\tojdbc5.jar * 2、创建数据库和表\n为了更简单的创建一个实例，我使用了Oracle的scoot账户， 直接使用emp表作为示例\n3、 在示例项目下添加mybatis配置文件 mybatis-conf.xml (命名随意)\n\x26lt;?xml version=\x26#34;1.0\x26#34; encoding=\x26#34;UTF-8\x26#34;?\x26gt; \x26lt;!DOCTYPE configuration PUBLIC \x26#34;-\/\/mybatis.org\/\/DTD Config 3.0\/\/EN\x26#34; \x26#34;http:\/\/mybatis.org\/dtd\/mybatis-3-config.dtd\x26#34;\x26gt; \x26lt;configuration\x26gt; \x26lt;environments default=\x26#34;development\x26#34;\x26gt; \x26lt;environment id=\x26#34;development\x26#34;\x26gt; \x26lt;transactionManager type=\x26#34;JDBC\x26#34; \/\x26gt; \x26lt;dataSource type=\x26#34;POOLED\x26#34;\x26gt; \x26lt;property name=\x26#34;driver\x26#34; value=\x26#34;oracle.jdbc.driver.OracleDriver\x26#34; \/\x26gt; \x26lt;property name=\x26#34;url\x26#34; value=\x26#34;jdbc:oracle:thin:@127.0.0.1:1521:ORCL\x26#34; \/\x26gt; \x26lt;property name=\x26#34;username\x26#34; value=\x26#34;scott\x26#34; \/\x26gt; \x26lt;property name=\x26#34;password\x26#34; value=\x26#34;tiger\x26#34; \/\x26gt; \x26lt;\/dataSource\x26gt; \x26lt;\/environment\x26gt; \x26lt;\/environments\x26gt; \x26lt;mappers\x26gt; \x26lt;mapper resource=\x26#34;com\/mapper\/EmpMapper.","inLanguage":"en-us","author":"nosky","creator":"nosky","publisher":"nosky","accountablePerson":"nosky","copyrightHolder":"nosky","copyrightYear":"2018","datePublished":"2018-02-03 20:55:54 \x2b0000 UTC","dateModified":"2018-02-03 20:55:54 \x2b0000 UTC","url":"https:\/\/no-sky.github.io\/2018\/mybatis%E5%88%9D%E8%AF%86\/","wordCount":"189","keywords":["mybatis","Note"]}</script><script type=text/javascript async src="https://cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML">MathJax.Hub.Config({tex2jax:{inlineMath:[['$','$'],['\\(','\\)']],displayMath:[['$$','$$'],['\[','\]']],processEscapes:true,processEnvironments:true,skipTags:['script','noscript','style','textarea','pre'],TeX:{equationNumbers:{autoNumber:"AMS"},extensions:["AMSmath.js","AMSsymbols.js"]}},"HTML-CSS":{linebreaks:{automatic:true}},SVG:{linebreaks:{automatic:true}}});MathJax.Hub.Queue(function(){var all=MathJax.Hub.getAllJax(),i;for(i=0;i<all.length;i+=1){all[i].SourceElement().parentNode.className+=' has-jax';}});</script><style>code.has-jax{font:inherit;font-size:100%;background:inherit;border:inherit;color:#515151}</style></head><body><div class=wrapper><nav class=navbar><div class=container><div class="navbar-header header-logo"><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href=https://no-sky.github.io>Note</a></div><div class="menu navbar-right"><a class=menu-item href=/posts/>Blog</a>
<a class=menu-item href=/tags/>Tags</a>
<a class=menu-item href=/about/>About</a></div></div></nav><nav class=navbar-mobile id=nav-mobile style=display:none><div class=container><div class=navbar-header><div><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href=https://no-sky.github.io>Note</a></div><div class=menu-toggle><span></span><span></span><span></span></div></div><div class=menu id=mobile-menu><a class=menu-item href=/posts/>Blog</a>
<a class=menu-item href=/tags/>Tags</a>
<a class=menu-item href=/about/>About</a></div></div></nav><main class=main><div class=container><article class=post-warp itemscope itemtype=http://schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline">Mybatis初识</h1><div class=post-meta>Written by <a itemprop=name href=https://no-sky.github.io rel=author>nosky</a> with ♥
<span class=post-time>on <time datetime=2018-02-03 itemprop=datePublished>February 3, 2018</time></span>
in</div></header><div class=post-content><p><strong>Mybatis初识</strong>
*
​ MyBatis是支持普通SQL查询，存储过程和高级映射的优秀持久层框架。MyBatis消除
​ 了几乎所有的JDBC代码和参数的手工设置以及对结果集的检索。MyBatis可以使用简单的
​ XML或注解用于配置和原始映射，将接口和Java的POJO（Plain Old Java Objects，普通的
​ Java对象）映射成数据库中的记录。
*
Mybatis简单使用</p><p>1、引入jar包
*
​ mybatis-3.1.1.jar
​ log4j-1.2.16.jar
​ ojdbc5.jar
*
2、创建数据库和表</p><p>为了更简单的创建一个实例，我使用了Oracle的scoot账户，
直接使用emp表作为示例</p><p>3、 在示例项目下添加mybatis配置文件 mybatis-conf.xml (命名随意)</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml>	<span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
	<span style=color:#75715e>&lt;!DOCTYPE configuration PUBLIC &#34;-//mybatis.org//DTD Config 3.0//EN&#34; &#34;http://mybatis.org/dtd/mybatis-3-config.dtd&#34;&gt;</span>
	<span style=color:#f92672>&lt;configuration</span><span style=color:#f92672>&gt;</span>

	<span style=color:#f92672>&lt;environments</span> <span style=color:#a6e22e>default=</span><span style=color:#e6db74>&#34;development&#34;</span><span style=color:#f92672>&gt;</span>
	    <span style=color:#f92672>&lt;environment</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;development&#34;</span><span style=color:#f92672>&gt;</span>
	    <span style=color:#f92672>&lt;transactionManager</span> <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;JDBC&#34;</span> <span style=color:#f92672>/&gt;</span>
	    <span style=color:#f92672>&lt;dataSource</span> <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;POOLED&#34;</span><span style=color:#f92672>&gt;</span>
	        <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;driver&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;oracle.jdbc.driver.OracleDriver&#34;</span> <span style=color:#f92672>/&gt;</span>
	        <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;url&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;jdbc:oracle:thin:@127.0.0.1:1521:ORCL&#34;</span> <span style=color:#f92672>/&gt;</span>
	        <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;username&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;scott&#34;</span> <span style=color:#f92672>/&gt;</span>
	        <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;password&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;tiger&#34;</span> <span style=color:#f92672>/&gt;</span>
	    <span style=color:#f92672>&lt;/dataSource&gt;</span>
	    <span style=color:#f92672>&lt;/environment&gt;</span>
	<span style=color:#f92672>&lt;/environments&gt;</span>
	<span style=color:#f92672>&lt;mappers</span><span style=color:#f92672>&gt;</span>
	    <span style=color:#f92672>&lt;mapper</span> <span style=color:#a6e22e>resource=</span><span style=color:#e6db74>&#34;com/mapper/EmpMapper.xml&#34;</span><span style=color:#f92672>/&gt;</span>          //在mybatis-cong.xml中注册EmpMapper.xml文件
	<span style=color:#f92672>&lt;/mappers&gt;</span>
	<span style=color:#f92672>&lt;/configuration&gt;</span>
</code></pre></div><p>4、 创建数据表对应的实体 如：</p><p>Emp.java</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>	    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Emp</span> <span style=color:#f92672>{</span>
	        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> empno<span style=color:#f92672>;</span>
	        <span style=color:#66d9ef>private</span> String ename<span style=color:#f92672>;</span>
	        <span style=color:#66d9ef>private</span> String job<span style=color:#f92672>;</span>
	        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> mgr<span style=color:#f92672>;</span>
	        <span style=color:#66d9ef>private</span> Date hiredate<span style=color:#f92672>;</span>
	        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>float</span> sal<span style=color:#f92672>;</span>
	        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>float</span> comm<span style=color:#f92672>;</span>
	        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> deptno<span style=color:#f92672>;</span>

	        <span style=color:#75715e>//get与set方法省略
</span><span style=color:#75715e></span>	    <span style=color:#f92672>}</span>
</code></pre></div><p>5、 创建实体对应的sql映射文件EmpMapper.xml</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml>	<span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
	<span style=color:#75715e>&lt;!DOCTYPE mapper PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34; 
</span><span style=color:#75715e>	&#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>

	<span style=color:#f92672>&lt;mapper</span> <span style=color:#a6e22e>namespace=</span><span style=color:#e6db74>&#34;com.mapper.EmpMapper&#34;</span><span style=color:#f92672>&gt;</span>     //Mappper映射文件所在位置
	    <span style=color:#f92672>&lt;select</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;getEmps&#34;</span> <span style=color:#a6e22e>resultType=</span><span style=color:#e6db74>&#34;com.model.Emp&#34;</span><span style=color:#f92672>&gt;</span>     //xml方式配置sql语句
	        select * from emp
	    <span style=color:#f92672>&lt;/select&gt;</span>
	<span style=color:#f92672>&lt;/mapper&gt;</span>
</code></pre></div><p>6、 在mybatis-cong.xml中注册EmpMapper.xml文件</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml>	 <span style=color:#f92672>&lt;mappers</span><span style=color:#f92672>&gt;</span>
	    <span style=color:#f92672>&lt;mapper</span> <span style=color:#a6e22e>resource=</span><span style=color:#e6db74>&#34;com/mapper/EmpMapper.xml&#34;</span><span style=color:#f92672>/&gt;</span>
	<span style=color:#f92672>&lt;/mappers&gt;</span>
</code></pre></div><p>7、 编写测试代码，执行预定义的select语句</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>	<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>EmpMapperTest</span> <span style=color:#f92672>{</span>
	    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[</span><span style=color:#f92672>]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
	        String resource <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;conf.xml&#34;</span><span style=color:#f92672>;</span> 
	        <span style=color:#75715e>//加载mybatis的配置文件（它也加载关联的映射文件）
</span><span style=color:#75715e></span>	        Reader reader <span style=color:#f92672>=</span> Resources<span style=color:#f92672>.</span><span style=color:#a6e22e>getResourceAsReader</span><span style=color:#f92672>(</span>resource<span style=color:#f92672>)</span><span style=color:#f92672>;</span> 
	        <span style=color:#75715e>//构建sqlSession的工厂
</span><span style=color:#75715e></span>	        SqlSessionFactory sessionFactory <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> SqlSessionFactoryBuilder<span style=color:#f92672>(</span><span style=color:#f92672>)</span><span style=color:#f92672>.</span><span style=color:#a6e22e>build</span><span style=color:#f92672>(</span>reader<span style=color:#f92672>)</span><span style=color:#f92672>;</span>
	        <span style=color:#75715e>//创建能执行映射文件中sql的sqlSession
</span><span style=color:#75715e></span>	        SqlSession session <span style=color:#f92672>=</span> sessionFactory<span style=color:#f92672>.</span><span style=color:#a6e22e>openSession</span><span style=color:#f92672>(</span><span style=color:#f92672>)</span><span style=color:#f92672>;</span>
	        <span style=color:#75715e>//映射sql的标识字符串
</span><span style=color:#75715e></span>	        String statement <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;com.mapper.EmpMapper.getEmps&#34;</span><span style=color:#f92672>;</span>
	        List<span style=color:#f92672>&lt;</span>Emp<span style=color:#f92672>&gt;</span> list <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;</span>Emp<span style=color:#f92672>&gt;</span><span style=color:#f92672>(</span><span style=color:#f92672>)</span><span style=color:#f92672>;</span>
	        list <span style=color:#f92672>=</span> session<span style=color:#f92672>.</span><span style=color:#a6e22e>selectList</span><span style=color:#f92672>(</span>statement<span style=color:#f92672>)</span><span style=color:#f92672>;</span>
	        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>list<span style=color:#f92672>)</span><span style=color:#f92672>;</span>
	    <span style=color:#f92672>}</span>
	<span style=color:#f92672>}</span>
</code></pre></div></div><div class=post-copyright><p class=copyright-item><span>Author:</span>
<span>nosky</span></p><p class=copyright-item><span>Link:</span>
<a href=https://no-sky.github.io/2018/mybatis%E5%88%9D%E8%AF%86/>https://no-sky.github.io/2018/mybatis%E5%88%9D%E8%AF%86/</span></p><p class="copyright-item lincese">本文采用<a rel=license href=http://creativecommons.org/licenses/by-nc/4.0/ target=_blank>知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可</p></div><div class=post-tags><section><i class="iconfont icon-tag"></i>Tag(s):
<span class=tag><a href=https://no-sky.github.io/tags/mybatis/>#mybatis</a></span></section><section><a href=javascript:window.history.back();>back</a></span> ·
<span><a href=https://no-sky.github.io>home</a></span></section></div><div class=post-nav><a href=https://no-sky.github.io/2018/%E7%94%A8java%E7%94%9F%E6%88%90%E4%BA%8C%E7%BB%B4%E7%A0%81/ class=prev rel=prev title=用Java生成二维码><i class="iconfont icon-left"></i>&nbsp;用Java生成二维码</a>
<a href=https://no-sky.github.io/2018/mybatis%E4%B9%8Bcrud%E6%93%8D%E4%BD%9C/ class=next rel=next title=Mybatis之CRUD操作>Mybatis之CRUD操作&nbsp;<i class="iconfont icon-right"></i></a></div><div class=post-comment></div></article></div></main><footer class=footer><div class=copyright>&copy;
<span itemprop=copyrightYear>2016 - 2020</span>
<span class=with-love><i class="iconfont icon-love"></i></span><span class=author itemprop=copyrightHolder><a href=https://no-sky.github.io>nosky</a> |</span>
<a href=http://beian.miit.gov.cn/ target=_blank rel="external nofollow">>湘ICP备19027112号</a> |
<span>Powered by <a href=https://gohugo.io/ target=_blank rel="external nofollow">Hugo</a> & <a href=https://github.com/liuzc/leaveit target=_blank rel="external nofollow">LeaveIt</a></span></br><span><a href=https://www.upyun.com/><img style=width:80px;height:30px;background-color:#70847d src=/images/upyun.png alt></a></span></div></footer><script src=/js/vendor_no_gallery.min.js async></script></div></body></html>