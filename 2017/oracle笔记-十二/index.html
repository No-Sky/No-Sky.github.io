<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://no-sky.github.io/images/favicon.ico><meta name=robots content="noodp"><meta name=author content="nosky"><meta name=description content="nosky 的个人学习笔记"><meta name=keywords content="[note 笔记 nosky]"><link rel=prev href=https://no-sky.github.io/2017/java%E4%B8%AD%E7%9A%84foreach%E4%B8%8Ejs%E4%B8%AD%E7%9A%84for-in%E7%9A%84%E5%8C%BA%E5%88%AB/><link rel=next href=https://no-sky.github.io/2017/oracle%E7%AC%94%E8%AE%B0-%E5%8D%81%E4%B8%89/><link rel=canonical href=https://no-sky.github.io/2017/oracle%E7%AC%94%E8%AE%B0-%E5%8D%81%E4%BA%8C/><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><title>Oracle笔记 （十二） | Note</title><meta name=title content="Oracle笔记 （十二） | Note"><link rel=stylesheet href=/font/iconfont.css><link rel=stylesheet href=/css/main.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/no-sky.github.io"},"articleSection":"posts","name":"Oracle笔记 （十二）","headline":"Oracle笔记 （十二）","description":"索引、同义词、数据库链接、PL\/SQL语句 一、索引 索引(INDEX)是为了加快数据的查找而创建的数据库对象，特别是对大表，索引可以有效地提高查找速度，也可以保证数据的惟一性\n创建索引一般要掌握以下原则：只有较大的表才有必要建立索引，表的记录应该大于50条，查询数据小于总行数的2%～4%。虽然可以为表创建多个索引，但是无助于查询的索引不但不会提高效率，还会增加系统开销。因为当执行DML操作时，索引也要跟着更新，这时索引可能会降低系统的性能。\n创建索引：\nCREATE INDEX 索引名 ON 表名(列名); 删除索引：\nDROP INDEX 索引名； 二、同义词 ** 同义词(SYNONYM)是为模式对象起的别名，可以为表、视图、序列、过程、函数和包等数据库模式对象创建同义词。**\n创建私有同义词：\nCREATE SYNONYM BOOK FOR 图书； 创建公有同义词(先要获得创建公有同义词的权限)：\nCREATE PUBLIC SYNONYM BOOK FOR SCOTT.图书； 删除同义词：\nDROP SYNONYM 同义词名； 三、数据库链接 ** 数据库链接(DATABASE LINK)是在分布式环境下，为了访问远程数据库而创建的数据通信链路。**\n格式：\nCREATE DATABASE LINK 链接名 CONNECT TO 账户 IDENTIFIED BY 口令 USING 服务名; 数据库链接一旦建立并测试成功，就可以使用以下形式来访问远程用户的表。\n表名@数据库链接名 四、PL\/sql 1、块结构和基本语法要求 块中各部分的作用解释如下：\n(1) DECLARE：声明部分标志。 (2) BEGIN：可执行部分标志。 (3) EXCEPTION：异常处理部分标志。 (4) END；：程序结束标志。 2、输出 第一种形式：\nDBMS_OUTPUT.PUT(字符串表达式)； 第二种形式：\nDBMS_OUTPUT.PUT_LINE(字符串表达式)； 第三种形式：","inLanguage":"en-us","author":"nosky","creator":"nosky","publisher":"nosky","accountablePerson":"nosky","copyrightHolder":"nosky","copyrightYear":"2017","datePublished":"2017-12-05 18:40:55 \x2b0000 UTC","dateModified":"2017-12-05 18:40:55 \x2b0000 UTC","url":"https:\/\/no-sky.github.io\/2017\/oracle%E7%AC%94%E8%AE%B0-%E5%8D%81%E4%BA%8C\/","wordCount":"129","keywords":["oracel","Note"]}</script><script type=text/javascript async src="https://cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML">MathJax.Hub.Config({tex2jax:{inlineMath:[['$','$'],['\\(','\\)']],displayMath:[['$$','$$'],['\[','\]']],processEscapes:true,processEnvironments:true,skipTags:['script','noscript','style','textarea','pre'],TeX:{equationNumbers:{autoNumber:"AMS"},extensions:["AMSmath.js","AMSsymbols.js"]}},"HTML-CSS":{linebreaks:{automatic:true}},SVG:{linebreaks:{automatic:true}}});MathJax.Hub.Queue(function(){var all=MathJax.Hub.getAllJax(),i;for(i=0;i<all.length;i+=1){all[i].SourceElement().parentNode.className+=' has-jax';}});</script><style>code.has-jax{font:inherit;font-size:100%;background:inherit;border:inherit;color:#515151}</style></head><body><div class=wrapper><nav class=navbar><div class=container><div class="navbar-header header-logo"><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href=https://no-sky.github.io>Note</a></div><div class="menu navbar-right"><a class=menu-item href=/posts/>Blog</a>
<a class=menu-item href=/tags/>Tags</a>
<a class=menu-item href=/about/>About</a></div></div></nav><nav class=navbar-mobile id=nav-mobile style=display:none><div class=container><div class=navbar-header><div><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href=https://no-sky.github.io>Note</a></div><div class=menu-toggle><span></span><span></span><span></span></div></div><div class=menu id=mobile-menu><a class=menu-item href=/posts/>Blog</a>
<a class=menu-item href=/tags/>Tags</a>
<a class=menu-item href=/about/>About</a></div></div></nav><main class=main><div class=container><article class=post-warp itemscope itemtype=http://schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline">Oracle笔记 （十二）</h1><div class=post-meta>Written by <a itemprop=name href=https://no-sky.github.io rel=author>nosky</a> with ♥
<span class=post-time>on <time datetime=2017-12-05 itemprop=datePublished>December 5, 2017</time></span>
in</div></header><div class=post-content><h1 id=plsql>索引、同义词、数据库链接、PL/SQL语句</h1><h2 id=heading>一、索引</h2><p><strong>索引(INDEX)是为了加快数据的查找而创建的数据库对象，特别是对大表，索引可以有效地提高查找速度，也可以保证数据的惟一性</strong></p><p><strong>创建索引一般要掌握以下原则：只有较大的表才有必要建立索引，表的记录应该大于50条，查询数据小于总行数的2%～4%。虽然可以为表创建多个索引，但是无助于查询的索引不但不会提高效率，还会增加系统开销。因为当执行DML操作时，索引也要跟着更新，这时索引可能会降低系统的性能。</strong></p><p>创建索引：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>INDEX</span> <span style=color:#960050;background-color:#1e0010>索</span><span style=color:#960050;background-color:#1e0010>引</span><span style=color:#960050;background-color:#1e0010>名</span> <span style=color:#66d9ef>ON</span> <span style=color:#960050;background-color:#1e0010>表</span><span style=color:#960050;background-color:#1e0010>名</span>(<span style=color:#960050;background-color:#1e0010>列</span><span style=color:#960050;background-color:#1e0010>名</span>);
</code></pre></div><p>删除索引：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL><span style=color:#66d9ef>DROP</span> <span style=color:#66d9ef>INDEX</span> <span style=color:#960050;background-color:#1e0010>索</span><span style=color:#960050;background-color:#1e0010>引</span><span style=color:#960050;background-color:#1e0010>名</span><span style=color:#960050;background-color:#1e0010>；</span>
</code></pre></div><h2 id=heading1>二、同义词</h2><p>** 同义词(SYNONYM)是为模式对象起的别名，可以为表、视图、序列、过程、函数和包等数据库模式对象创建同义词。**</p><p>创建私有同义词：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL><span style=color:#66d9ef>CREATE</span> SYNONYM BOOK <span style=color:#66d9ef>FOR</span> <span style=color:#960050;background-color:#1e0010>图</span><span style=color:#960050;background-color:#1e0010>书</span><span style=color:#960050;background-color:#1e0010>；</span>
</code></pre></div><p>创建公有同义词(先要获得创建公有同义词的权限)：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>PUBLIC</span> SYNONYM BOOK <span style=color:#66d9ef>FOR</span> SCOTT.<span style=color:#960050;background-color:#1e0010>图</span><span style=color:#960050;background-color:#1e0010>书</span><span style=color:#960050;background-color:#1e0010>；</span>
</code></pre></div><p>删除同义词：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL><span style=color:#66d9ef>DROP</span> SYNONYM <span style=color:#960050;background-color:#1e0010>同</span><span style=color:#960050;background-color:#1e0010>义</span><span style=color:#960050;background-color:#1e0010>词</span><span style=color:#960050;background-color:#1e0010>名</span><span style=color:#960050;background-color:#1e0010>；</span>
</code></pre></div><h2 id=heading2>三、数据库链接</h2><p>** 数据库链接(DATABASE LINK)是在分布式环境下，为了访问远程数据库而创建的数据通信链路。**</p><p>格式：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>DATABASE</span> LINK <span style=color:#960050;background-color:#1e0010>链</span><span style=color:#960050;background-color:#1e0010>接</span><span style=color:#960050;background-color:#1e0010>名</span> <span style=color:#66d9ef>CONNECT</span> <span style=color:#66d9ef>TO</span> <span style=color:#960050;background-color:#1e0010>账</span><span style=color:#960050;background-color:#1e0010>户</span> IDENTIFIED <span style=color:#66d9ef>BY</span> <span style=color:#960050;background-color:#1e0010>口</span><span style=color:#960050;background-color:#1e0010>令</span> <span style=color:#66d9ef>USING</span> <span style=color:#960050;background-color:#1e0010>服</span><span style=color:#960050;background-color:#1e0010>务</span><span style=color:#960050;background-color:#1e0010>名</span>;
</code></pre></div><p>数据库链接一旦建立并测试成功，就可以使用以下形式来访问远程用户的表。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL><span style=color:#960050;background-color:#1e0010>表</span><span style=color:#960050;background-color:#1e0010>名</span><span style=color:#f92672>@</span><span style=color:#960050;background-color:#1e0010>数</span><span style=color:#960050;background-color:#1e0010>据</span><span style=color:#960050;background-color:#1e0010>库</span><span style=color:#960050;background-color:#1e0010>链</span><span style=color:#960050;background-color:#1e0010>接</span><span style=color:#960050;background-color:#1e0010>名</span>
</code></pre></div><h2 id=plsql1>四、PL/sql</h2><h3 id=1>1、块结构和基本语法要求</h3><p>块中各部分的作用解释如下：</p><pre><code>(1)  DECLARE：声明部分标志。

(2)  BEGIN：可执行部分标志。

(3)  EXCEPTION：异常处理部分标志。

(4)  END；：程序结束标志。
</code></pre><h3 id=2>2、输出</h3><p>第一种形式：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL>DBMS_OUTPUT.PUT(<span style=color:#960050;background-color:#1e0010>字</span><span style=color:#960050;background-color:#1e0010>符</span><span style=color:#960050;background-color:#1e0010>串</span><span style=color:#960050;background-color:#1e0010>表</span><span style=color:#960050;background-color:#1e0010>达</span><span style=color:#960050;background-color:#1e0010>式</span>)<span style=color:#960050;background-color:#1e0010>；</span>
</code></pre></div><p>第二种形式：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL>DBMS_OUTPUT.PUT_LINE(<span style=color:#960050;background-color:#1e0010>字</span><span style=color:#960050;background-color:#1e0010>符</span><span style=color:#960050;background-color:#1e0010>串</span><span style=color:#960050;background-color:#1e0010>表</span><span style=color:#960050;background-color:#1e0010>达</span><span style=color:#960050;background-color:#1e0010>式</span>)<span style=color:#960050;background-color:#1e0010>；</span>
</code></pre></div><p>第三种形式：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL>DBMS_OUTPUT.NEW_LINE<span style=color:#960050;background-color:#1e0010>；</span>
</code></pre></div><h3 id=3>3、变量赋值：</h3><p>第一种形式：</p><pre><code>SELECT 列名1，列名2... INTO 变量1，变量2... FROM 表名 WHERE 条件；第二种形式：变量名:=值
</code></pre><p>例：查询雇员编号为7788的雇员姓名和工资。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL><span style=color:#66d9ef>SET</span> SERVEROUTPUT <span style=color:#66d9ef>ON</span>		<span style=color:#75715e>--在命令行界面必须写
</span><span style=color:#75715e></span><span style=color:#66d9ef>DECLARE</span><span style=color:#75715e>--定义部分标识		
</span><span style=color:#75715e></span> v_name  VARCHAR2(<span style=color:#ae81ff>10</span>);	<span style=color:#75715e>--定义字符串变量v_name		
</span><span style=color:#75715e></span> v_sal   NUMBER(<span style=color:#ae81ff>5</span>);	<span style=color:#75715e>--定义数值变量v_sal		
</span><span style=color:#75715e></span><span style=color:#66d9ef>BEGIN</span>			<span style=color:#75715e>--可执行部分标识SELECT	 ename,sal INTO v_name,v_sal 
</span><span style=color:#75715e></span> <span style=color:#66d9ef>FROM</span> emp 
 <span style=color:#66d9ef>WHERE</span> empno<span style=color:#f92672>=</span><span style=color:#ae81ff>7788</span>;<span style=color:#75715e>--在程序中插入的SQL语句
</span><span style=color:#75715e></span>  		
DBMS_OUTPUT.PUT_LINE(<span style=color:#e6db74>&#39;</span><span style=color:#e6db74>7788号雇员是：</span><span style=color:#e6db74>&#39;</span><span style=color:#f92672>|</span><span style=color:#f92672>|</span>v_name<span style=color:#f92672>|</span><span style=color:#f92672>|</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>，工资为：</span><span style=color:#e6db74>&#39;</span><span style=color:#f92672>|</span><span style=color:#f92672>|</span>to_char(v_sal));
		<span style=color:#75715e>--输出雇员名和工资		
</span><span style=color:#75715e></span><span style=color:#66d9ef>END</span>;	
</code></pre></div><h3 id=4>4、结合变量的定义和使用（即全局变量）</h3><p>** 该变量是在整个SQL<em>Plus环境下有效的变量，在退出SQL</em>Plus之前始终有效，所以可以使用该变量在不同的程序之间传递信息。结合变量不是由程序定义的，而是使用系统命令VARIABLE定义的。**</p><p>例：定义并使用结合变量</p><p>步骤1：输入和执行下列命令，定义结合变量g_ename：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL><span style=color:#75715e>--SET SERVEROUTPUT ON 
</span><span style=color:#75715e></span>	<span style=color:#66d9ef>VARIABLE</span>  g_ename VARCHAR2(<span style=color:#ae81ff>100</span>)		
<span style=color:#66d9ef>BEGIN</span>
	:g_ename:<span style=color:#f92672>=</span>:g_ename<span style=color:#f92672>|</span><span style=color:#f92672>|</span> <span style=color:#e6db74>&#39;</span><span style=color:#e6db74>Hello~ </span><span style=color:#e6db74>&#39;</span>;			<span style=color:#75715e>--在程序中使用结合变量
</span><span style=color:#75715e></span>	DBMS_OUTPUT.PUT_LINE(:g_ename);                <span style=color:#75715e>--输出结合变量的值
</span><span style=color:#75715e></span><span style=color:#66d9ef>END</span>;
</code></pre></div><h3 id=5>5．记录变量的定义</h3><p><strong>还可以根据表或视图的一个记录中的所有字段定义变量，称为记录变量。记录变量包含若干个字段，在结构上同表的一个记录相同，定义方法是在表名后跟%ROWTYPE。记录变量的字段名就是表的字段名，数据类型也一致。</strong></p><p>如：</p><pre><code>v_name emp.ename%TYPE;
</code></pre></div><div class=post-copyright><p class=copyright-item><span>Author:</span>
<span>nosky</span></p><p class=copyright-item><span>Link:</span>
<a href=https://no-sky.github.io/2017/oracle%E7%AC%94%E8%AE%B0-%E5%8D%81%E4%BA%8C/>https://no-sky.github.io/2017/oracle%E7%AC%94%E8%AE%B0-%E5%8D%81%E4%BA%8C/</span></p><p class="copyright-item lincese">本文采用<a rel=license href=http://creativecommons.org/licenses/by-nc/4.0/ target=_blank>知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可</p></div><div class=post-tags><section><i class="iconfont icon-tag"></i>Tag(s):
<span class=tag><a href=https://no-sky.github.io/tags/oracel/>#oracel</a></span></section><section><a href=javascript:window.history.back();>back</a></span> ·
<span><a href=https://no-sky.github.io>home</a></span></section></div><div class=post-nav><a href=https://no-sky.github.io/2017/java%E4%B8%AD%E7%9A%84foreach%E4%B8%8Ejs%E4%B8%AD%E7%9A%84for-in%E7%9A%84%E5%8C%BA%E5%88%AB/ class=prev rel=prev title="java中的foreach与js中的for in的区别"><i class="iconfont icon-left"></i>&nbsp;java中的foreach与js中的for in的区别</a>
<a href=https://no-sky.github.io/2017/oracle%E7%AC%94%E8%AE%B0-%E5%8D%81%E4%B8%89/ class=next rel=next title="Oracle笔记 （十三）">Oracle笔记 （十三）&nbsp;<i class="iconfont icon-right"></i></a></div><div class=post-comment></div></article></div></main><footer class=footer><div class=copyright>&copy;
<span itemprop=copyrightYear>2016 - 2019</span>
<span class=with-love><i class="iconfont icon-love"></i></span><span class=author itemprop=copyrightHolder><a href=https://no-sky.github.io>nosky</a> |</span>
<a href=http://www.miibeian.gov.cn/ target=_blank rel="external nofollow">湘ICP备19027112号</a> |
<span>Powered by <a href=https://gohugo.io/ target=_blank rel="external nofollow">Hugo</a> & <a href=https://github.com/liuzc/leaveit target=_blank rel="external nofollow">LeaveIt</a></span></br><span><a href=https://www.upyun.com/><img style=width:80px;height:30px;background-color:#70847d src=/images/upyun.png alt></a></span></div></footer><script src=/js/vendor_no_gallery.min.js async></script></div></body></html>