<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://no-sky.github.io/images/favicon.ico><meta name=robots content="noodp"><meta name=author content="nosky"><meta name=description content="nosky 的个人学习笔记"><meta name=keywords content="[note 笔记 nosky]"><link rel=prev href=https://no-sky.github.io/2017/oracle%E7%AC%94%E8%AE%B0-%E5%8D%81/><link rel=next href=https://no-sky.github.io/2017/java%E4%B8%AD%E7%9A%84foreach%E4%B8%8Ejs%E4%B8%AD%E7%9A%84for-in%E7%9A%84%E5%8C%BA%E5%88%AB/><link rel=canonical href=https://no-sky.github.io/2017/oracle%E7%AC%94%E8%AE%B0-%E5%8D%81%E4%B8%80/><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><title>Oracle笔记 （十一） | Note</title><meta name=title content="Oracle笔记 （十一） | Note"><link rel=stylesheet href=/font/iconfont.css><link rel=stylesheet href=/css/main.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/no-sky.github.io"},"articleSection":"posts","name":"Oracle笔记 （十一）","headline":"Oracle笔记 （十一）","description":"分区、视图 一、分区表 在某些场合会使用非常大的表，比如人口信息统计表。如果一个表很大，就会降低查询的速度，并增加管理的难度。一旦发生磁盘损坏，可能整个表的数据就会丢失，恢复比较困难。根据这一情况，可以创建分区表，把一个大表分成几个区(小段)，对数据的操作和管理都可以针对分区进行，这样就可以提高数据库的运行效率。分区可以存在于不同的表空间上，提高了数据的可用性。例：创建和使用分区表。 ​\t如：创建按成绩分区的考生表，共分为3个区：\n步骤3：检查A区中的考生：\nSELECT * FROM 考生 PARTITION(A); 步骤4：检查全部的考生：\nSELECT * FROM 考生; 二、视图 1、视图的概念 视图不同于表，视图本身不包含任何数据。而视图只是一种定义，对应一个查询语句。视图的数据都来自于某些表，这些表被称为基表。 视图可以在表能够使用的任何地方使用，但在对视图的操作上同表相比有些限制，特别是插入和修改操作。对视图的操作将传递到基表，所以在表上定义的约束条件和触发器在视图上将同样起作用。2、视图的创建\n2、格式： create [or replace] view 视图名 as select 语句; 例：创建图书作者视图：\nCREATE VIEW 图书作者(书名,作者) AS SELECT 图书名称,作者 FROM 图书; 查询视图全部内容\nSELECT * FROM 图书作者; 查询部分视图：\nSELECT 作者 FROM 图书作者; 删除视图：\nDROP VIEW 清华图书; 3．创建只读视图 创建只读视图要用WITH READ ONLY选项。 ​\t例：创建emp表的经理视图：\nCREATE OR REPLACE VIEW manager AS SELECT * FROM emp WHERE job= \x26#39;MANAGER\x26#39; WITH READ ONLY; 4．使用WITH CHECK OPTION选项 使用WITH CHECK OPTION选项。使用该选项，可以对视图的插入或更新进行限制，即该数据必须满足视图定义中的子查询中的WHERE条件，否则不允许插入或更新。","inLanguage":"en-us","author":"nosky","creator":"nosky","publisher":"nosky","accountablePerson":"nosky","copyrightHolder":"nosky","copyrightYear":"2017","datePublished":"2017-12-02 17:43:26 \x2b0000 UTC","dateModified":"2017-12-02 17:43:26 \x2b0000 UTC","url":"https:\/\/no-sky.github.io\/2017\/oracle%E7%AC%94%E8%AE%B0-%E5%8D%81%E4%B8%80\/","wordCount":"117","keywords":["oracel","Note"]}</script><script type=text/javascript async src="https://cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML">MathJax.Hub.Config({tex2jax:{inlineMath:[['$','$'],['\\(','\\)']],displayMath:[['$$','$$'],['\[','\]']],processEscapes:true,processEnvironments:true,skipTags:['script','noscript','style','textarea','pre'],TeX:{equationNumbers:{autoNumber:"AMS"},extensions:["AMSmath.js","AMSsymbols.js"]}},"HTML-CSS":{linebreaks:{automatic:true}},SVG:{linebreaks:{automatic:true}}});MathJax.Hub.Queue(function(){var all=MathJax.Hub.getAllJax(),i;for(i=0;i<all.length;i+=1){all[i].SourceElement().parentNode.className+=' has-jax';}});</script><style>code.has-jax{font:inherit;font-size:100%;background:inherit;border:inherit;color:#515151}</style></head><body><div class=wrapper><nav class=navbar><div class=container><div class="navbar-header header-logo"><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href=https://no-sky.github.io>Note</a></div><div class="menu navbar-right"><a class=menu-item href=/posts/>Blog</a>
<a class=menu-item href=/tags/>Tags</a>
<a class=menu-item href=/about/>About</a></div></div></nav><nav class=navbar-mobile id=nav-mobile style=display:none><div class=container><div class=navbar-header><div><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href=https://no-sky.github.io>Note</a></div><div class=menu-toggle><span></span><span></span><span></span></div></div><div class=menu id=mobile-menu><a class=menu-item href=/posts/>Blog</a>
<a class=menu-item href=/tags/>Tags</a>
<a class=menu-item href=/about/>About</a></div></div></nav><main class=main><div class=container><article class=post-warp itemscope itemtype=http://schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline">Oracle笔记 （十一）</h1><div class=post-meta>Written by <a itemprop=name href=https://no-sky.github.io rel=author>nosky</a> with ♥
<span class=post-time>on <time datetime=2017-12-02 itemprop=datePublished>December 2, 2017</time></span>
in</div></header><div class=post-content><h1 id=heading>分区、视图</h1><h2 id=heading1>一、分区表</h2><p><strong>在某些场合会使用非常大的表，比如人口信息统计表。如果一个表很大，就会降低查询的速度，并增加管理的难度。一旦发生磁盘损坏，可能整个表的数据就会丢失，恢复比较困难。根据这一情况，可以创建分区表，把一个大表分成几个区(小段)，对数据的操作和管理都可以针对分区进行，这样就可以提高数据库的运行效率。分区可以存在于不同的表空间上，提高了数据的可用性。例：创建和使用分区表。</strong>
​
如：创建按成绩分区的考生表，共分为3个区：</p><p>步骤3：检查A区中的考生：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span>  <span style=color:#66d9ef>FROM</span>  <span style=color:#960050;background-color:#1e0010>考</span><span style=color:#960050;background-color:#1e0010>生</span> PARTITION(A);
</code></pre></div><p>步骤4：检查全部的考生：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span>  <span style=color:#66d9ef>FROM</span>  <span style=color:#960050;background-color:#1e0010>考</span><span style=color:#960050;background-color:#1e0010>生</span>;
</code></pre></div><h2 id=heading2>二、视图</h2><h3 id=1>1、视图的概念</h3><p>视图不同于表，视图本身不包含任何数据。而视图只是一种定义，对应一个查询语句。视图的数据都来自于某些表，这些表被称为基表。 视图可以在表能够使用的任何地方使用，但在对视图的操作上同表相比有些限制，特别是插入和修改操作。对视图的操作将传递到基表，所以在表上定义的约束条件和触发器在视图上将同样起作用。2、视图的创建</p><h3 id=2>2、格式：</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL><span style=color:#66d9ef>create</span> [<span style=color:#66d9ef>or</span> <span style=color:#66d9ef>replace</span>] <span style=color:#66d9ef>view</span> <span style=color:#960050;background-color:#1e0010>视</span><span style=color:#960050;background-color:#1e0010>图</span><span style=color:#960050;background-color:#1e0010>名</span> 
<span style=color:#66d9ef>as</span>
<span style=color:#66d9ef>select</span> <span style=color:#960050;background-color:#1e0010>语</span><span style=color:#960050;background-color:#1e0010>句</span>;
</code></pre></div><p>例：创建图书作者视图：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>VIEW</span> <span style=color:#960050;background-color:#1e0010>图</span><span style=color:#960050;background-color:#1e0010>书</span><span style=color:#960050;background-color:#1e0010>作</span><span style=color:#960050;background-color:#1e0010>者</span>(<span style=color:#960050;background-color:#1e0010>书</span><span style=color:#960050;background-color:#1e0010>名</span>,<span style=color:#960050;background-color:#1e0010>作</span><span style=color:#960050;background-color:#1e0010>者</span>) 		
<span style=color:#66d9ef>AS</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#960050;background-color:#1e0010>图</span><span style=color:#960050;background-color:#1e0010>书</span><span style=color:#960050;background-color:#1e0010>名</span><span style=color:#960050;background-color:#1e0010>称</span>,<span style=color:#960050;background-color:#1e0010>作</span><span style=color:#960050;background-color:#1e0010>者</span> <span style=color:#66d9ef>FROM</span> <span style=color:#960050;background-color:#1e0010>图</span><span style=color:#960050;background-color:#1e0010>书</span>;
</code></pre></div><p>查询视图全部内容</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> <span style=color:#960050;background-color:#1e0010>图</span><span style=color:#960050;background-color:#1e0010>书</span><span style=color:#960050;background-color:#1e0010>作</span><span style=color:#960050;background-color:#1e0010>者</span>;    
</code></pre></div><p>查询部分视图：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL><span style=color:#66d9ef>SELECT</span> <span style=color:#960050;background-color:#1e0010>作</span><span style=color:#960050;background-color:#1e0010>者</span> <span style=color:#66d9ef>FROM</span> <span style=color:#960050;background-color:#1e0010>图</span><span style=color:#960050;background-color:#1e0010>书</span><span style=color:#960050;background-color:#1e0010>作</span><span style=color:#960050;background-color:#1e0010>者</span>;
</code></pre></div><p>删除视图：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL><span style=color:#66d9ef>DROP</span> <span style=color:#66d9ef>VIEW</span> <span style=color:#960050;background-color:#1e0010>清</span><span style=color:#960050;background-color:#1e0010>华</span><span style=color:#960050;background-color:#1e0010>图</span><span style=color:#960050;background-color:#1e0010>书</span>;
</code></pre></div><h3 id=3>3．创建只读视图</h3><p>创建只读视图要用<code>WITH READ ONLY</code>选项。
​
例：创建emp表的经理视图：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>OR</span> <span style=color:#66d9ef>REPLACE</span> <span style=color:#66d9ef>VIEW</span> manager 
	<span style=color:#66d9ef>AS</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> emp <span style=color:#66d9ef>WHERE</span> job<span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;</span><span style=color:#e6db74>MANAGER</span><span style=color:#e6db74>&#39;</span>
	<span style=color:#66d9ef>WITH</span> <span style=color:#66d9ef>READ</span> <span style=color:#66d9ef>ONLY</span>;
</code></pre></div><h3 id=4with-check-option>4．使用WITH CHECK OPTION选项</h3><p>使用<code>WITH CHECK OPTION</code>选项。使用该选项，可以对视图的插入或更新进行限制，即该数据必须满足视图定义中的子查询中的WHERE条件，否则不允许插入或更新。</p><p>例：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>OR</span> <span style=color:#66d9ef>REPLACE</span> <span style=color:#66d9ef>VIEW</span> <span style=color:#960050;background-color:#1e0010>清</span><span style=color:#960050;background-color:#1e0010>华</span><span style=color:#960050;background-color:#1e0010>图</span><span style=color:#960050;background-color:#1e0010>书</span> 		
	<span style=color:#66d9ef>AS</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> <span style=color:#960050;background-color:#1e0010>图</span><span style=color:#960050;background-color:#1e0010>书</span> <span style=color:#66d9ef>WHERE</span> <span style=color:#960050;background-color:#1e0010>出</span><span style=color:#960050;background-color:#1e0010>版</span><span style=color:#960050;background-color:#1e0010>社</span><span style=color:#960050;background-color:#1e0010>编</span><span style=color:#960050;background-color:#1e0010>号</span><span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;</span><span style=color:#e6db74>01</span><span style=color:#e6db74>&#39;</span>
</code></pre></div><p><em>WITH CHECK OPTION;注：插入数据时，由于带了with check option的选项，则只能插入出版社编为'01'的数据</em></p><h3 id=5>5．来自基表的限制</h3><p>除了以上的限制，基表本身的限制和约束也必须要考虑。如果生成子查询的语句是一个分组查询，或查询中出现计算列，这时显然不能对表进行插入。另外，主键和NOT NULL列如果没有出现在视图的子查询中，也不能对视图进行插入。在视图中插入的数据，也必须满足基表的约束条件。</p><h3 id=6>6.视图的查看</h3><p><code>USER_VIEWS</code>字典中包含了视图的定义。
​
<code>USER_UPDATABLE_COLUMNS</code>字典包含了哪些列可以更新、插入、删除。
​
<code>USER_OBJECTS</code>字典中包含了用户的对象。
​
可以通过<code>DESCRIB</code>E命令查看字典的其他列信息。</p><p>例：查看用户拥有的视图：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL><span style=color:#66d9ef>SELECT</span> object_name <span style=color:#66d9ef>FROM</span> user_objects <span style=color:#66d9ef>WHERE</span> object_type<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>VIEW</span><span style=color:#e6db74>&#39;</span>;
</code></pre></div></div><div class=post-copyright><p class=copyright-item><span>Author:</span>
<span>nosky</span></p><p class=copyright-item><span>Link:</span>
<a href=https://no-sky.github.io/2017/oracle%E7%AC%94%E8%AE%B0-%E5%8D%81%E4%B8%80/>https://no-sky.github.io/2017/oracle%E7%AC%94%E8%AE%B0-%E5%8D%81%E4%B8%80/</span></p><p class="copyright-item lincese">本文采用<a rel=license href=http://creativecommons.org/licenses/by-nc/4.0/ target=_blank>知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可</p></div><div class=post-tags><section><i class="iconfont icon-tag"></i>Tag(s):
<span class=tag><a href=https://no-sky.github.io/tags/oracel/>#oracel</a></span></section><section><a href=javascript:window.history.back();>back</a></span> ·
<span><a href=https://no-sky.github.io>home</a></span></section></div><div class=post-nav><a href=https://no-sky.github.io/2017/oracle%E7%AC%94%E8%AE%B0-%E5%8D%81/ class=prev rel=prev title="Oracle笔记 （十）"><i class="iconfont icon-left"></i>&nbsp;Oracle笔记 （十）</a>
<a href=https://no-sky.github.io/2017/java%E4%B8%AD%E7%9A%84foreach%E4%B8%8Ejs%E4%B8%AD%E7%9A%84for-in%E7%9A%84%E5%8C%BA%E5%88%AB/ class=next rel=next title="java中的foreach与js中的for in的区别">java中的foreach与js中的for in的区别&nbsp;<i class="iconfont icon-right"></i></a></div><div class=post-comment></div></article></div></main><footer class=footer><div class=copyright>&copy;
<span itemprop=copyrightYear>2016 - 2020</span>
<span class=with-love><i class="iconfont icon-love"></i></span><span class=author itemprop=copyrightHolder><a href=https://no-sky.github.io>nosky</a> |</span>
<a href=http://beian.miit.gov.cn/ target=_blank rel="external nofollow">>湘ICP备19027112号</a> |
<span>Powered by <a href=https://gohugo.io/ target=_blank rel="external nofollow">Hugo</a> & <a href=https://github.com/liuzc/leaveit target=_blank rel="external nofollow">LeaveIt</a></span></br><span><a href=https://www.upyun.com/><img style=width:80px;height:30px;background-color:#70847d src=/images/upyun.png alt></a></span></div></footer><script src=/js/vendor_no_gallery.min.js async></script></div></body></html>