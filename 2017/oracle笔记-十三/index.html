<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://no-sky.github.io/images/favicon.ico><meta name=robots content="noodp"><meta name=author content="nosky"><meta name=description content="nosky 的个人学习笔记"><meta name=keywords content="[note 笔记 nosky]"><link rel=prev href=https://no-sky.github.io/2017/oracle%E7%AC%94%E8%AE%B0-%E5%8D%81%E4%BA%8C/><link rel=next href=https://no-sky.github.io/2017/oracle%E7%AC%94%E8%AE%B0-%E5%8D%81%E5%9B%9B/><link rel=canonical href=https://no-sky.github.io/2017/oracle%E7%AC%94%E8%AE%B0-%E5%8D%81%E4%B8%89/><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><title>Oracle笔记 （十三） | Note</title><meta name=title content="Oracle笔记 （十三） | Note"><link rel=stylesheet href=/font/iconfont.css><link rel=stylesheet href=/css/main.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/no-sky.github.io"},"articleSection":"posts","name":"Oracle笔记 （十三）","headline":"Oracle笔记 （十三）","description":"PL\/SQL空值语句、游标 一、IF语句 1、IF-THEN-END IF形式 2、IF-THEN-ELSE-END IF形式 3．IF-THEN-ELSIF-ELSE-END IF形式 ##二、CASE语句\n1．基本CASE结构 2.搜索CASE结构 三、循环 1．基本LOOP循环 2.FOR LOOP循环 FOR循环是固定次数循环，格式如下：\n注：循环控制变量是隐含定义的，不需要声明。 ​\t下限和上限用于指明循环次数。正常情况下循环控制变量的取值由下限到上限递增，REVERSE关键字表示循环控制变量的取值由上限到下限递减。\n3．WHILE LOOP循环 四、游标 1、概念 游标是SQL的一个内存工作区，由系统或用户以变量的形式定义。游标的作用就是用于临时存储从数据库中提取的数据块。在某些情况下，需要把数据从存放在磁盘的表中调到计算机内存中进行处理，最后将处理结果显示出来或最终写回数据库。这样数据处理的速度才会提高，否则频繁的磁盘数据交换会降低效率。\n游标有两种类型：显式游标和隐式游标。\n在前述程序中用到的SELECT\x26hellip;INTO\x26hellip;查询语句，一次只能从数据库中提取一行数据，系统都会使用一个隐式游标。\n显式游标对应一个返回结果为多行多列的SELECT语句。\n游标一旦打开，数据就从数据库中传送到游标变量中，然后应用程序再从游标变量中分解出需要的数据，并进行处理。\n2、隐式游标属性    隐式游标的属性 返回值类型 意义     SQL%ROWCOUNT 整型 代表DML语句成功执行的数据行数   SQL%FOUND 布尔型 值为TRUE代表插入、删除、更新或单行查询操作成功   SQL%NOTFOUND 布尔型 与SQL%FOUND属性返回值相反   SQL%ISOPEN 布尔型 DML执行过程中为真，结束后为假    如：使用隐式游标的属性，判断对雇员工资的修改是否成功。\nSET SERVEROUTPUT ON BEGIN UPDATE emp SET sal=sal\x2b100 WHERE empno=1234;\tIF SQL%FOUND THEN DBMS_OUTPUT.","inLanguage":"en-us","author":"nosky","creator":"nosky","publisher":"nosky","accountablePerson":"nosky","copyrightHolder":"nosky","copyrightYear":"2017","datePublished":"2017-12-05 19:11:04 \x2b0000 UTC","dateModified":"2017-12-05 19:11:04 \x2b0000 UTC","url":"https:\/\/no-sky.github.io\/2017\/oracle%E7%AC%94%E8%AE%B0-%E5%8D%81%E4%B8%89\/","wordCount":"287","keywords":["oracel","Note"]}</script><script type=text/javascript async src="https://cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML">MathJax.Hub.Config({tex2jax:{inlineMath:[['$','$'],['\\(','\\)']],displayMath:[['$$','$$'],['\[','\]']],processEscapes:true,processEnvironments:true,skipTags:['script','noscript','style','textarea','pre'],TeX:{equationNumbers:{autoNumber:"AMS"},extensions:["AMSmath.js","AMSsymbols.js"]}},"HTML-CSS":{linebreaks:{automatic:true}},SVG:{linebreaks:{automatic:true}}});MathJax.Hub.Queue(function(){var all=MathJax.Hub.getAllJax(),i;for(i=0;i<all.length;i+=1){all[i].SourceElement().parentNode.className+=' has-jax';}});</script><style>code.has-jax{font:inherit;font-size:100%;background:inherit;border:inherit;color:#515151}</style></head><body><div class=wrapper><nav class=navbar><div class=container><div class="navbar-header header-logo"><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href=https://no-sky.github.io>Note</a></div><div class="menu navbar-right"><a class=menu-item href=/posts/>Blog</a>
<a class=menu-item href=/tags/>Tags</a>
<a class=menu-item href=/about/>About</a></div></div></nav><nav class=navbar-mobile id=nav-mobile style=display:none><div class=container><div class=navbar-header><div><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href=https://no-sky.github.io>Note</a></div><div class=menu-toggle><span></span><span></span><span></span></div></div><div class=menu id=mobile-menu><a class=menu-item href=/posts/>Blog</a>
<a class=menu-item href=/tags/>Tags</a>
<a class=menu-item href=/about/>About</a></div></div></nav><main class=main><div class=container><article class=post-warp itemscope itemtype=http://schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline">Oracle笔记 （十三）</h1><div class=post-meta>Written by <a itemprop=name href=https://no-sky.github.io rel=author>nosky</a> with ♥
<span class=post-time>on <time datetime=2017-12-05 itemprop=datePublished>December 5, 2017</time></span>
in</div></header><div class=post-content><h1 id=plsql>PL/SQL空值语句、游标</h1><h2 id=if>一、IF语句</h2><h3 id=1ifthenend-if>1、IF-THEN-END IF形式</h3><h3 id=2ifthenelseend-if>2、IF-THEN-ELSE-END IF形式</h3><h3 id=3ifthenelsifelseend-if>3．IF-THEN-ELSIF-ELSE-END IF形式</h3><p>##二、CASE语句</p><h3 id=1case>1．基本CASE结构</h3><h3 id=2case>2.搜索CASE结构</h3><h2 id=heading>三、循环</h2><h3 id=1loop>1．基本LOOP循环</h3><h3 id=2for-loop>2.FOR LOOP循环</h3><p>FOR循环是固定次数循环，格式如下：</p><p><em>注：循环控制变量是隐含定义的，不需要声明。</em>
​
<strong>下限和上限用于指明循环次数。正常情况下循环控制变量的取值由下限到上限递增，REVERSE关键字表示循环控制变量的取值由上限到下限递减。</strong></p><h2 id=3while-loop>3．WHILE LOOP循环</h2><h2 id=heading1>四、游标</h2><h3 id=1>1、概念</h3><p><strong>游标是SQL的一个内存工作区，由系统或用户以变量的形式定义。游标的作用就是用于临时存储从数据库中提取的数据块。在某些情况下，需要把数据从存放在磁盘的表中调到计算机内存中进行处理，最后将处理结果显示出来或最终写回数据库。这样数据处理的速度才会提高，否则频繁的磁盘数据交换会降低效率。</strong></p><p>游标有两种类型：显式游标和隐式游标。</p><p>在前述程序中用到的SELECT&mldr;INTO&mldr;查询语句，一次只能从数据库中提取一行数据，系统都会使用一个隐式游标。</p><p>显式游标对应一个返回结果为多行多列的SELECT语句。</p><p>游标一旦打开，数据就从数据库中传送到游标变量中，然后应用程序再从游标变量中分解出需要的数据，并进行处理。</p><h3 id=2>2、隐式游标属性</h3><table><thead><tr><th>隐式游标的属性</th><th>返回值类型</th><th>意义</th></tr></thead><tbody><tr><td>SQL%ROWCOUNT</td><td>整型</td><td>代表DML语句成功执行的数据行数</td></tr><tr><td>SQL%FOUND</td><td>布尔型</td><td>值为TRUE代表插入、删除、更新或单行查询操作成功</td></tr><tr><td>SQL%NOTFOUND</td><td>布尔型</td><td>与SQL%FOUND属性返回值相反</td></tr><tr><td>SQL%ISOPEN</td><td>布尔型</td><td>DML执行过程中为真，结束后为假</td></tr></tbody></table><p>如：使用隐式游标的属性，判断对雇员工资的修改是否成功。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL><span style=color:#66d9ef>SET</span> SERVEROUTPUT <span style=color:#66d9ef>ON</span> 		
<span style=color:#66d9ef>BEGIN</span>  		
<span style=color:#66d9ef>UPDATE</span> emp <span style=color:#66d9ef>SET</span> sal<span style=color:#f92672>=</span>sal<span style=color:#f92672>+</span><span style=color:#ae81ff>100</span> <span style=color:#66d9ef>WHERE</span> empno<span style=color:#f92672>=</span><span style=color:#ae81ff>1234</span>;		 
<span style=color:#66d9ef>IF</span> <span style=color:#66d9ef>SQL</span><span style=color:#f92672>%</span><span style=color:#66d9ef>FOUND</span> <span style=color:#66d9ef>THEN</span>  		
DBMS_OUTPUT.PUT_LINE(<span style=color:#e6db74>&#39;</span><span style=color:#e6db74>成功修改雇员工资！</span><span style=color:#e6db74>&#39;</span>);  		
<span style=color:#66d9ef>COMMIT</span>;  		
ELSEDBMS_OUTPUT.PUT_LINE(<span style=color:#e6db74>&#39;</span><span style=color:#e6db74>修改雇员工资失败！</span><span style=color:#e6db74>&#39;</span>);		 
<span style=color:#66d9ef>END</span> <span style=color:#66d9ef>IF</span>; 		
<span style=color:#66d9ef>END</span>;
</code></pre></div><h3 id=3>3、显式游标</h3><p>游标的使用分成以下4个步骤。</p><h4 id=a>a．声明游标</h4><p>在DECLEAR部分按以下格式声明游标：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL><span style=color:#66d9ef>CURSOR</span> <span style=color:#960050;background-color:#1e0010>游</span><span style=color:#960050;background-color:#1e0010>标</span><span style=color:#960050;background-color:#1e0010>名</span>[(<span style=color:#960050;background-color:#1e0010>参</span><span style=color:#960050;background-color:#1e0010>数</span><span style=color:#ae81ff>1</span> <span style=color:#960050;background-color:#1e0010>数</span><span style=color:#960050;background-color:#1e0010>据</span><span style=color:#960050;background-color:#1e0010>类</span><span style=color:#960050;background-color:#1e0010>型</span>[<span style=color:#960050;background-color:#1e0010>，</span><span style=color:#960050;background-color:#1e0010>参</span><span style=color:#960050;background-color:#1e0010>数</span><span style=color:#ae81ff>2</span> <span style=color:#960050;background-color:#1e0010>数</span><span style=color:#960050;background-color:#1e0010>据</span><span style=color:#960050;background-color:#1e0010>类</span><span style=color:#960050;background-color:#1e0010>型</span>...])]		 
<span style=color:#66d9ef>IS</span> SELECT语句;
</code></pre></div><p>参数是可选部分，所定义的参数可以出现在SELECT语句的WHERE子句中。如果定义了参数，则必须在打开游标时传递相应的实际参数。</p><h4 id=b>b.打开游标</h4><p>在可执行部分，按以下格式打开游标：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL><span style=color:#66d9ef>OPEN</span> <span style=color:#960050;background-color:#1e0010>游</span><span style=color:#960050;background-color:#1e0010>标</span><span style=color:#960050;background-color:#1e0010>名</span>[(<span style=color:#960050;background-color:#1e0010>实</span><span style=color:#960050;background-color:#1e0010>际</span><span style=color:#960050;background-color:#1e0010>参</span><span style=color:#960050;background-color:#1e0010>数</span><span style=color:#ae81ff>1</span>[<span style=color:#960050;background-color:#1e0010>，</span><span style=color:#960050;background-color:#1e0010>实</span><span style=color:#960050;background-color:#1e0010>际</span><span style=color:#960050;background-color:#1e0010>参</span><span style=color:#960050;background-color:#1e0010>数</span><span style=color:#ae81ff>2</span>...])];
</code></pre></div><p>打开游标时，SELECT语句的查询结果就被传送到了游标工作区。</p><h4 id=c>c.提取数据</h4><p>在可执行部分，按以下格式将游标工作区中的数据取到变量中。提取操作必须在打开游标之后进行。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL>	<span style=color:#66d9ef>FETCH</span> <span style=color:#960050;background-color:#1e0010>游</span><span style=color:#960050;background-color:#1e0010>标</span><span style=color:#960050;background-color:#1e0010>名</span> <span style=color:#66d9ef>INTO</span> <span style=color:#960050;background-color:#1e0010>变</span><span style=color:#960050;background-color:#1e0010>量</span><span style=color:#960050;background-color:#1e0010>名</span><span style=color:#ae81ff>1</span>[<span style=color:#960050;background-color:#1e0010>，</span><span style=color:#960050;background-color:#1e0010>变</span><span style=color:#960050;background-color:#1e0010>量</span><span style=color:#960050;background-color:#1e0010>名</span><span style=color:#ae81ff>2</span>...];
</code></pre></div><p>或</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL>	<span style=color:#66d9ef>FETCH</span> <span style=color:#960050;background-color:#1e0010>游</span><span style=color:#960050;background-color:#1e0010>标</span><span style=color:#960050;background-color:#1e0010>名</span> <span style=color:#66d9ef>INTO</span> <span style=color:#960050;background-color:#1e0010>记</span><span style=color:#960050;background-color:#1e0010>录</span><span style=color:#960050;background-color:#1e0010>变</span><span style=color:#960050;background-color:#1e0010>量</span>;
</code></pre></div><p>游标打开后有一个指针指向数据区，FETCH语句一次返回指针所指的一行数据，要返回多行需重复执行，可以使用循环语句来实现。控制循环可以通过判断游标的属性来进行。</p><p>定义记录变量的方法如下：</p><pre><code>变量名 表名|游标名%ROWTYPE；
</code></pre><h4 id=d>d.关闭游标</h4><pre><code>	CLOSE 游标名;
</code></pre><p>显式游标打开后，必须显式地关闭。游标一旦关闭，游标占用的资源就被释放，游标变成无效，必须重新打开才能使用。</p><p>【例1】 用游标提取emp表中7788雇员的名称和职务。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL><span style=color:#66d9ef>SET</span> SERVEROUTPUT <span style=color:#66d9ef>ON</span>	     <span style=color:#75715e>--在命令行界面是必须的，在第三方工具的SQL界面中无需此语句
</span><span style=color:#75715e></span><span style=color:#66d9ef>DECLARE</span>		
    v_ename VARCHAR2(<span style=color:#ae81ff>10</span>);	
    v_job VARCHAR2(<span style=color:#ae81ff>10</span>);	
    <span style=color:#66d9ef>CURSOR</span> emp_cursor <span style=color:#66d9ef>IS</span> 
 <span style=color:#66d9ef>SELECT</span> ename,job <span style=color:#66d9ef>FROM</span> emp <span style=color:#66d9ef>WHERE</span> empno<span style=color:#f92672>=</span><span style=color:#ae81ff>7788</span>;
<span style=color:#66d9ef>BEGIN</span>
    <span style=color:#66d9ef>OPEN</span> emp_cursor;
    <span style=color:#66d9ef>FETCH</span> emp_cursor <span style=color:#66d9ef>INTO</span> v_ename,v_job;	
    DBMS_OUTPUT.PUT_LINE(v_ename<span style=color:#f92672>|</span><span style=color:#f92672>|</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>,</span><span style=color:#e6db74>&#39;</span><span style=color:#f92672>|</span><span style=color:#f92672>|</span>v_job);
    <span style=color:#66d9ef>CLOSE</span> emp_cursor;	
<span style=color:#66d9ef>END</span>;
</code></pre></div><p>【例2】 用游标提取emp表中7788雇员的姓名、职务和工资。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL><span style=color:#66d9ef>SET</span> SERVEROUTPUT <span style=color:#66d9ef>ON</span>	     <span style=color:#75715e>--在命令行界面是必须的，在第三方工具的SQL界面中无需此语句
</span><span style=color:#75715e></span><span style=color:#66d9ef>DECLARE</span>	 
	<span style=color:#66d9ef>CURSOR</span> emp_cursor <span style=color:#66d9ef>IS</span>  <span style=color:#66d9ef>SELECT</span> ename,job,sal <span style=color:#66d9ef>FROM</span> emp <span style=color:#66d9ef>WHERE</span> empno<span style=color:#f92672>=</span><span style=color:#ae81ff>7788</span>;
	emp_record emp_cursor<span style=color:#f92672>%</span>ROWTYPE;
	    <span style=color:#75715e>--用游标定义记录变量	
</span><span style=color:#75715e></span><span style=color:#66d9ef>BEGIN</span> 
	<span style=color:#66d9ef>OPEN</span> emp_cursor;	
	<span style=color:#66d9ef>FETCH</span> emp_cursor <span style=color:#66d9ef>INTO</span> emp_record;  
	 DBMS_OUTPUT.PUT_LINE(emp_record.ename<span style=color:#f92672>|</span><span style=color:#f92672>|</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>,</span><span style=color:#e6db74>&#39;</span><span style=color:#f92672>|</span><span style=color:#f92672>|</span> emp_record.job<span style=color:#f92672>|</span><span style=color:#f92672>|</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>,</span><span style=color:#e6db74>&#39;</span><span style=color:#f92672>|</span><span style=color:#f92672>|</span> emp_record.sal);	
	 <span style=color:#66d9ef>CLOSE</span> emp_cursor;	
<span style=color:#66d9ef>END</span>;
</code></pre></div><p>【例3】 显示工资最高的前3名雇员的名称和工资。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL><span style=color:#66d9ef>SET</span> SERVEROUTPUT <span style=color:#66d9ef>ON</span>		   <span style=color:#75715e>--在命令行界面是必须的，在第三方工具的SQL界面中无需此语句
</span><span style=color:#75715e></span><span style=color:#66d9ef>DECLARE</span>	
	 V_ename VARCHAR2(<span style=color:#ae81ff>10</span>);	
	V_sal NUMBER(<span style=color:#ae81ff>5</span>);	
	<span style=color:#66d9ef>CURSOR</span> emp_cursor <span style=color:#66d9ef>IS</span>  <span style=color:#66d9ef>SELECT</span> ename,sal <span style=color:#66d9ef>FROM</span> emp <span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> sal <span style=color:#66d9ef>DESC</span>;	
<span style=color:#66d9ef>BEGIN</span>	
	 <span style=color:#66d9ef>OPEN</span> emp_cursor;
	 <span style=color:#66d9ef>FOR</span> I <span style=color:#66d9ef>IN</span> <span style=color:#ae81ff>1</span>..<span style=color:#ae81ff>3</span> LOOP  
		 <span style=color:#66d9ef>FETCH</span> emp_cursor <span style=color:#66d9ef>INTO</span> v_ename,v_sal;
		 DBMS_OUTPUT.PUT_LINE(v_ename<span style=color:#f92672>|</span><span style=color:#f92672>|</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>,</span><span style=color:#e6db74>&#39;</span><span style=color:#f92672>|</span><span style=color:#f92672>|</span>v_sal);
  <span style=color:#66d9ef>END</span> LOOP;
   <span style=color:#66d9ef>CLOSE</span> emp_cursor;
<span style=color:#66d9ef>END</span>;
</code></pre></div><h3 id=4>4、游标循环（重点）</h3><p>方法一：使用特殊的FOR循环形式显示全部雇员的编号和名称(省略掉定义记录变量、打开游标、提取数据、关闭游标)。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL><span style=color:#66d9ef>SET</span> SERVEROUTPUT <span style=color:#66d9ef>ON</span>     <span style=color:#75715e>--在命令行界面是必须的，在第三方工具的SQL界面中无需此语句
</span><span style=color:#75715e></span><span style=color:#66d9ef>DECLARE</span>
 	<span style=color:#66d9ef>CURSOR</span> emp_cursor <span style=color:#66d9ef>IS</span> 
 <span style=color:#66d9ef>SELECT</span> empno, ename <span style=color:#66d9ef>FROM</span> emp;
<span style=color:#66d9ef>BEGIN</span>	
	<span style=color:#66d9ef>FOR</span> Emp_record <span style=color:#66d9ef>IN</span> emp_cursor LOOP   
		 DBMS_OUTPUT.PUT_LINE(Emp_record.empno<span style=color:#f92672>|</span><span style=color:#f92672>|</span> Emp_record.ename);
	<span style=color:#66d9ef>END</span> LOOP;
	<span style=color:#66d9ef>END</span>;
</code></pre></div><p>方法二：最简单方式</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL><span style=color:#66d9ef>SET</span> SERVEROUTPUT <span style=color:#66d9ef>ON</span>      <span style=color:#75715e>--在命令行界面是必须的，在第三方工具的SQL界面中无需此语句
</span><span style=color:#75715e></span><span style=color:#66d9ef>BEGIN</span>	 <span style=color:#66d9ef>FOR</span> re <span style=color:#66d9ef>IN</span> (<span style=color:#66d9ef>SELECT</span> ename <span style=color:#66d9ef>FROM</span> EMP)  LOOP
		DBMS_OUTPUT.PUT_LINE(re.ename)
	<span style=color:#66d9ef>END</span> LOOP;
<span style=color:#66d9ef>END</span>;
</code></pre></div><h3 id=5>5、利用游标属性做循环条件</h3><p>【训练1】 使用游标的属性练习。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-SQL data-lang=SQL><span style=color:#66d9ef>SET</span> SERVEROUTPUT <span style=color:#66d9ef>ON</span>         <span style=color:#75715e>--在命令行界面是必须的，在第三方工具的SQL界面中无需此语句
</span><span style=color:#75715e></span><span style=color:#66d9ef>DECLARE</span>
  V_ename VARCHAR2(<span style=color:#ae81ff>10</span>);
  <span style=color:#66d9ef>CURSOR</span> emp_cursor <span style=color:#66d9ef>IS</span> 
  <span style=color:#66d9ef>SELECT</span> ename <span style=color:#66d9ef>FROM</span> emp;
<span style=color:#66d9ef>BEGIN</span>	
  <span style=color:#66d9ef>OPEN</span> emp_cursor;	 
  <span style=color:#66d9ef>IF</span> emp_cursor<span style=color:#f92672>%</span>ISOPEN <span style=color:#66d9ef>THEN</span>
  LOOP
    <span style=color:#66d9ef>FETCH</span> emp_cursor <span style=color:#66d9ef>INTO</span> v_ename;	        
    EXIT <span style=color:#66d9ef>WHEN</span> emp_cursor<span style=color:#f92672>%</span>NOTFOUND;
    DBMS_OUTPUT.PUT_LINE(to_char(emp_cursor<span style=color:#f92672>%</span>ROWCOUNT)<span style=color:#f92672>|</span><span style=color:#f92672>|</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>-</span><span style=color:#e6db74>&#39;</span><span style=color:#f92672>|</span><span style=color:#f92672>|</span>v_ename);	        <span style=color:#66d9ef>END</span> LOOP;
  <span style=color:#66d9ef>ELSE</span>
    DBMS_OUTPUT.PUT_LINE(<span style=color:#e6db74>&#39;</span><span style=color:#e6db74>用户信息：游标没有打开！</span><span style=color:#e6db74>&#39;</span>);
  <span style=color:#66d9ef>END</span> <span style=color:#66d9ef>IF</span>;         
  <span style=color:#66d9ef>CLOSE</span>  emp_cursor;
<span style=color:#66d9ef>END</span>;
</code></pre></div></div><div class=post-copyright><p class=copyright-item><span>Author:</span>
<span>nosky</span></p><p class=copyright-item><span>Link:</span>
<a href=https://no-sky.github.io/2017/oracle%E7%AC%94%E8%AE%B0-%E5%8D%81%E4%B8%89/>https://no-sky.github.io/2017/oracle%E7%AC%94%E8%AE%B0-%E5%8D%81%E4%B8%89/</span></p><p class="copyright-item lincese">本文采用<a rel=license href=http://creativecommons.org/licenses/by-nc/4.0/ target=_blank>知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可</p></div><div class=post-tags><section><i class="iconfont icon-tag"></i>Tag(s):
<span class=tag><a href=https://no-sky.github.io/tags/oracel/>#oracel</a></span></section><section><a href=javascript:window.history.back();>back</a></span> ·
<span><a href=https://no-sky.github.io>home</a></span></section></div><div class=post-nav><a href=https://no-sky.github.io/2017/oracle%E7%AC%94%E8%AE%B0-%E5%8D%81%E4%BA%8C/ class=prev rel=prev title="Oracle笔记 （十二）"><i class="iconfont icon-left"></i>&nbsp;Oracle笔记 （十二）</a>
<a href=https://no-sky.github.io/2017/oracle%E7%AC%94%E8%AE%B0-%E5%8D%81%E5%9B%9B/ class=next rel=next title="Oracle笔记 （十四）">Oracle笔记 （十四）&nbsp;<i class="iconfont icon-right"></i></a></div><div class=post-comment></div></article></div></main><footer class=footer><div class=copyright>&copy;
<span itemprop=copyrightYear>2016 - 2019</span>
<span class=with-love><i class="iconfont icon-love"></i></span><span class=author itemprop=copyrightHolder><a href=https://no-sky.github.io>nosky</a> |</span>
<a href=http://www.beian.miit.gov.cn/ target=_blank rel="external nofollow"><img src=/images/beian.png>湘ICP备19027112号</a> |
<span>Powered by <a href=https://gohugo.io/ target=_blank rel="external nofollow">Hugo</a> & <a href=https://github.com/liuzc/leaveit target=_blank rel="external nofollow">LeaveIt</a></span></br><span><a href=https://www.upyun.com/><img style=width:80px;height:30px;background-color:#70847d src=/images/upyun.png alt></a></span></div></footer><script src=/js/vendor_no_gallery.min.js async></script></div></body></html>