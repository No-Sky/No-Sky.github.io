---
title: "UDP协议"
author: "nosky"
date: 2019-11-22T16:40:52+08:00
draft: false
tags: ["Network Protocol"]
---

# TCP 和 UDP 有哪些区别？

TCP 是面向连接的，UDP 是面向无连接的。
什么叫面向连接，什么叫无连接呢？在互通之前，面向连接的协议会先建立连接。
所谓的建立连接，是为了在客户端和服务端维护连接，而建立一定的数据结构来维护双方交互的状态，
用这样的数据结构来保证所谓的面向连接的特性。

# UDP协议

 UDP协议，即用户数据报协议（User Datagram Protocol），是一个简单的面向数据报的传输层协议。UDP协议只在IP数据报服务商增加了很少一点的功能，就是复用和分用，以及差错检测的功能。 

## UDP协议的主要特点

（1）无连接的

发送数据之前不需要建立连接，减少了开销和发送数据之前的时延。

（2）尽最大努力交付

不保证可靠的交付，主机不需要维持复杂的链接状态表。

（3）面向报文的

发送方的UDP对应用程序交下来的报文，在添加首部后就向下交付给IP层。既不拆分，也不合并，而是保留这些报文的边界，因此，应用程序需要选择合适的报文大小。

（4）没有拥塞控制。

（5）支持一对一、多对一和多对多的交互通信。

（6）首部开销小，只有8个字节。

UDP数据报的首部结构

用户数据报UDP有两个字段：数据字段和首部字段。首部字段只有8个字节，如下图所示：

 ![img](/posts/networkProtocol-geektime/UDP-Layer.assets/20160313152631284) 



UDP首部由4各字段组成，各占两个字节：

（1）源端口

在需要对方回信时使用，不需要时全为0。

（2）目的端口

发送UDP数据报的目的地。

（3）长度

UDP数据报的长度，最短为8个字节，只包含首部。

（4）检验和

用于检验UDP数据报在传输过程中有没有出差错，有则丢弃。